(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3beca880"],{"8fdb":function(t,s,e){"use strict";e("e8e2")},e8e2:function(t,s,e){},ee41:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOnload,expression:"isOnload"}],staticClass:"print-layer"},[e("div",{directives:[{name:"drag",rawName:"v-drag"}],ref:"printBtn",staticClass:"print-btn-layer no-print"},[e("div",{staticClass:"print"},[e("div",{staticClass:"head"},[t._v(t._s(t.$t("dt.form.action")))]),e("div",{staticClass:"print-body"},[e("Button",{attrs:{type:"primary"},on:{click:function(s){return t.handlePrint()}}},[t._v(t._s(t.$t("dt.base.Print")))]),e("Button",{on:{click:function(s){return t.handleClose()}}},[t._v(t._s(t.$t("dt.form.cancel")))])],1)])]),e("div",{staticClass:"print-connent only-for-print",attrs:{id:"print"}},t._l(t.formTemp.data,(function(s){return e("div",{key:s.id,staticClass:"print-item"},[e("div",{staticClass:"print-head"},[e("div",{staticClass:"title-orderType-user"},[e("div",{staticClass:"title"},[t._v(t._s(t.branch.name))]),e("div",{staticClass:"orderType"},[t._v(t._s(t.$t("dt.form.SalesBill")))]),e("div",{staticClass:"info-gourp flex"},[e("div",{staticClass:"info-left flex-item"},[e("div",{staticClass:"item flex"},[e("div",{staticClass:"left flex-item"},[t._v(t._s(t.$t("dt.form.Customer"))+"："+t._s(s.customer.name))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"right padding_2"},[t._v(t._s(t.$t("dt.base.ShippingAddress"))+"："+t._s(s.customer.fullAddress)+t._s(s.customer.address||""))])]),e("div",{staticClass:"item flex"},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.customer.username,expression:"item.customer.username"}],staticClass:"username"},[t._v(t._s(t.$t("dt.base.Contact"))+"："+t._s(s.customer.username))]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.customer.telPhone,expression:"item.customer.telPhone"}],staticClass:"phone"},[t._v(t._s(t.$t("dt.base.telPhone"))+"："+t._s(s.customer.telPhone))])])]),e("div",{staticClass:"info-right flex-item"},[e("div",{staticClass:"orderNo"},[t._v(t._s(t.$t("dt.form.OrderNo"))+"："+t._s(s.orderNo))]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.logistic.name,expression:"item.logistic.name"}],staticClass:"orderNo padding_2"},[t._v(t._s(t.$t("dt.base.ShippingMethod"))+"："+t._s(s.logistic.name))]),e("div",{staticClass:"flex user-time"},[e("div",{staticClass:"user"},[t._v(t._s(t.$t("dt.base.Handler"))+"："+t._s(s.user.username))]),e("div",{staticClass:"time"},[t._v(t._s(t.$t("dt.base.Date"))+"："+t._s(t._f("formatTime")(s.createdAt)))])])])])])]),e("div",{staticClass:"print-body"},[e("div",{staticClass:"row-item"},[e("div",{staticClass:"item w_5"},[t._v(t._s(t.$t("dt.base.OrderNumber")))]),e("div",{staticClass:"item w_34"},[t._v(t._s(t.$t("dt.form.ProductName")))]),e("div",{staticClass:"item w_15"},[t._v(t._s(t.$t("dt.form.ProductCode")))]),e("div",{staticClass:"item w_5"},[t._v(t._s(t.$t("dt.form.Unit")))]),e("div",{staticClass:"item w_5"},[t._v(t._s(t.$t("dt.base.Number")))]),e("div",{staticClass:"item w_12"},[t._v(t._s(t.$t("dt.base.UnitPrice")))]),e("div",{staticClass:"item w_12"},[t._v(t._s(t.$t("dt.form.Discount")))]),e("div",{staticClass:"item w_12"},[t._v(t._s(t.$t("dt.base.Money")))])]),t._l(s.detail,(function(s,i){return e("div",{key:s.id,staticClass:"row-item"},[e("div",{staticClass:"item w_5"},[t._v(t._s(i+1))]),e("div",{staticClass:"item w_34"},[t._v(t._s(s.label)+t._s(s.name))]),e("div",{staticClass:"item w_15"},[t._v(t._s(s.sku.skuCode||"-"))]),e("div",{staticClass:"item w_5"},[t._v(t._s(s.product.unit.name))]),e("div",{staticClass:"item w_5"},[t._v(t._s(s.number))]),e("div",{staticClass:"item w_12"},[t._v(t._s(t._f("money")(s.unitPrice))+" "+t._s(t.$t("dt.base.unit")))]),e("div",{staticClass:"item w_12"},[t._v(t._s(t._f("money")(s.discountPrice))+" "+t._s(t.$t("dt.base.unit")))]),e("div",{staticClass:"item w_12"},[t._v(t._s(t._f("money")(s.paymentPrice))+" "+t._s(t.$t("dt.base.unit")))])])}))],2),e("div",{staticClass:"print-foot"},[e("div",{staticClass:"flex remark item border-bottom"},[e("div",{staticClass:"left"},[t._v(t._s(t.$t("dt.base.remark"))+"："+t._s(s.remark))]),e("div",{staticClass:"right"},[e("div",{staticClass:"total flex justify-end"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("dt.base.TotalAmount"))+"：")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("money")(s.total))+" "+t._s(t.$t("dt.base.unit")))])]),e("div",{staticClass:"total-discount flex justify-end"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("dt.form.TotalDiscount"))+"：")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("money")(s.totalDiscount))+" "+t._s(t.$t("dt.base.unit")))])]),e("div",{staticClass:"pay-money flex justify-end"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("dt.form.ActualPayment"))+"：")]),e("div",{staticClass:"value"},[t._v(t._s(t._f("money")(s.payMoney))+" "+t._s(t.$t("dt.base.unit")))])])])]),e("div",{staticClass:"item flex"},[e("div",{staticClass:"left"},[t._v(t._s(t.$t("dt.base.FromSign"))+"：")]),e("div",{staticClass:"right"},[t._v(t._s(t.$t("dt.base.ToSign"))+"：")])]),e("div",{staticClass:"item flex"},[e("div",{staticClass:"left"},[t._v(t._s(t.$t("dt.base.Date"))+"：")]),e("div",{staticClass:"right"},[t._v(t._s(t.$t("dt.base.Date"))+"：")])])])])})),0)])},a=[],d=(e("2d38"),e("2c78"),e("9953"),e("69bf"),e("02bf"),e("a39b"),e("0c65"),e("4c09")),n=e("d211"),r=e("b8f9"),l={name:"PrintSalesOrder",data:function(){return{isOnload:!1,formTemp:{}}},components:{},computed:{branch:function(){var t=this.$Local.get("CURRENT_BRANCH").data||{};return t}},created:function(){this.handleOrderDetail()},mounted:function(){window.aa=this},watch:{},filters:{},methods:{handleOrderDetail:function(){var t=this,s=this.$Local.get("SALES_ORDER_PRINT_IDS").data||[];if(s.length>0){var e=this.handleInitFields([],["id","orderNo","remark","createdAt","detail.id","detail.label","detail.name","detail.number","detail.unitPrice","detail.discountPrice","detail.paymentPrice","detail.product.unit.id","detail.product.unit.name","detail.sku.id","detail.sku.skuCode","user.id","user.username","customer.id","customer.name","customer.username","customer.telPhone","customer.address","customer.fullAddress","logistic.id","logistic.name"],[]);this.$Http.Post({mutation:this.$Model.SalesOrders,variables:{currentPage:1,perPage:0,filter:{id_in:s}},fields:e}).then((function(s){t.isOnload=!0;var e=s.data;r["a"].each(e.data,(function(t){t.detail=t.detail||[],t.customer=t.customer||{},t.logistic=t.logistic||{},t.total=t.detail.map((function(t){return t.unitPrice*t.number})).reduce((function(t,s){return t+s}),0),t.payMoney=t.detail.map((function(t){return t.paymentPrice})).reduce((function(t,s){return t+s}),0),t.totalDiscount=t.detail.map((function(t){return t.discountPrice})).reduce((function(t,s){return t+s}),0)})),t.formTemp=Object(n["a"])(Object(n["a"])({},t.formTemp),e)}))}},handleInitFields:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["current_page","per_page","total","total_page"];if(-1===t.findIndex((function(t){return"deletedAt"===t.key}))&&-1===s.indexOf("deletedAt")&&s.push("deletedAt"),!r["a"].isArray(t)||!r["a"].isArray(s)||!r["a"].isArray(e))return[];var i={data:["id"].concat(Object(d["a"])(s)).concat(r["a"].uniqBy(t,"key").filter((function(t){return void 0!==t.key&&"action"!==t.key})).map((function(t){return t.key})))};return this.fields=Object.values(Object(n["a"])({},i.data)),[].concat(Object(d["a"])(e),[Object(n["a"])({},i)])},handlePrint:function(){window.print()},handleClose:function(){window.close()}}},c=l,o=(e("8fdb"),e("c701")),u=Object(o["a"])(c,i,a,!1,null,"3df9438b",null);s["default"]=u.exports}}]);