(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5224ad38"],{"081f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchant-type-list-page"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"controller"},[a("Row",{staticClass:"filter-group",class:{active:t.rowToggle},attrs:{type:"flex",gutter:20}},[a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.form.BranchName"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{search:"",placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.form.BranchName")})},on:{"on-enter":t.handleFilterChange,"on-search":t.handleFilterChange},model:{value:t.filters.name_like,callback:function(e){t.$set(t.filters,"name_like",e)},expression:"filters.name_like"}})],1)],1)],1),t.$isHasMenuAuth("admin.MerchantList")?a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.form.ParentMerchant"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("Select",{attrs:{clearable:"",placeholder:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.ParentMerchant")})},on:{"on-change":t.handleFilterChange},model:{value:t.filters.merchantId,callback:function(e){t.$set(t.filters,"merchantId",e)},expression:"filters.merchantId"}},t._l(t.formTemp.merchant,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1)],1):t._e(),a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.form.MerchantVerify"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("Select",{attrs:{clearable:"",placeholder:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.MerchantVerify")})},on:{"on-change":t.handleFilterChange},model:{value:t.filters.verify,callback:function(e){t.$set(t.filters,"verify",e)},expression:"filters.verify"}},t._l(t.$options.filters.merchantVerify([]),(function(e,n){return a("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.form.status"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("status",{on:{swtichStatus:t.handleFilterChange}})],1)],1)],1),a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.base.sort"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("sorts",{on:{swtichSorts:t.handleFilterChange}})],1)],1)],1),a("button",{staticClass:"row-toggle",attrs:{type:"button"},on:{click:function(e){return t.$store.commit("spinShow/rowToggle")}}},[t.rowToggle?a("Icon",{attrs:{type:"ios-arrow-up",size:"25",color:"#999"}}):a("Icon",{attrs:{type:"ios-arrow-down",size:"25",color:"#999"}})],1)],1),a("div",{staticClass:"btn-group"},[a("div",{staticClass:"left"},[t.$isHasMenuAuth("admin.MerchantBranchDelete")?a("Button",{attrs:{type:"error"},on:{click:function(e){return t.handleAsync(t.tableMultipleSelect)}}},[a("Icon",{attrs:{type:"md-trash"}}),t._v(t._s(t.$t("dt.form.deleteAll"))+" ")],1):t._e(),t.$isHasMenuAuth("admin.MerchantBranchEdit")?a("Button",{attrs:{type:"success"},on:{click:function(e){return t.handleAsyncSavaAll(t.tableMultipleSelect)}}},[a("Icon",{attrs:{type:"md-create"}}),t._v(t._s(t.$t("dt.form.saveAll"))+" ")],1):t._e()],1),a("div",{staticClass:"right"},[t.$isHasMenuAuth("admin.MerchantBranchExport")?a("Button",{attrs:{type:"warning"},on:{click:t.handleAsyncExport}},[a("Icon",{attrs:{type:"md-cloud-download"}}),t._v(t._s(t.$t("dt.form.export"))+"Excel ")],1):t._e()],1)]),a("div",{staticClass:"table"},[a("Table",{ref:"selection",attrs:{border:"",loading:t.loading&&t.isMethodList,columns:t.columns,data:t.formTemp.data},on:{"on-select-cancel":t.handleTableOnSelectCancel,"on-selection-change":t.handleTableSelectionChange}})],1),a("div",{staticClass:"page-list"},[a("Page",{attrs:{"show-total":"","show-sizer":"","show-elevator":"",total:t.formTemp.total,current:t.formTemp.current_page,"page-size-opts":t.formTemp.pageSizeOpts,"page-size":t.formTemp.per_page},on:{"on-page-size-change":t.handleOnPageSizeChange,"on-change":t.handleChangePage}})],1)],1)])])},r=[],i=(a("2d38"),a("69bf"),a("5c4c"),a("d211")),s=a("b8f9"),l=a("efa4"),o={name:"MerchantBranchList",mixins:[l["a"]],data:function(){return{formTemp:{merchant:[]}}},components:{},computed:{columns:function(){var t=this;return[{type:"selection",width:60,align:"center",fixed:"left"},{title:this.$t("dt.form.index"),type:"index",width:80,align:"center"},{title:this.$t("dt.form.BranchName"),key:"name",minWidth:200,align:"center",render:function(e,a){return t.$isHasMenuAuth("admin.MerchantBranchEdit")&&-1!==t.selectTable.indexOf(a.row.id)?e("Input",{props:{size:"small",value:a.row.name,clearable:!0,placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.form.BranchName")})},on:{"on-clear":function(){return t.handleSelectChange("",a.index,a.column.key)},input:function(e){t.handleSelectChange(e,a.index,a.column.key)}}},a.row.name):e(t.$isHasMenuAuth("admin.MerchantBranchDetail")?"router-link":"span",{props:{to:{name:"admin.MerchantBranchDetail",params:{id:a.row.id}}}},a.row.name)}},{title:this.$t("dt.form.ParentMerchant"),minWidth:200,align:"center",render:function(e,a){return e(t.$isHasMenuAuth("admin.MerchantDetail")?"router-link":"span",{style:{color:"#515a6e"},props:{to:{name:"admin.MerchantDetail",params:{id:a.row.merchant.id}}}},a.row.merchant.name)}},{title:this.$t("dt.form.affiliation"),key:"init",minWidth:120,align:"center",render:function(e,a){var n=1*a.row.init===2?t.$t("dt.form.section"):t.$t("dt.form.subsection"),r="#ff9900";return r=1*a.row.init===2?"#2d8cf0":"#ff9900",e("span",{style:{color:r}},n)}},{title:this.$t("dt.form.staff"),width:150,align:"center",render:function(e,a){return e("span","".concat(a.row.users.length).concat(t.$t("dt.base.people")))}},{title:this.$t("dt.base.attestation"),key:"verify",minWidth:120,fixed:"right",align:"center",renderHeader:function(e,a){var n=a.column;return t.$isHasMenuAuth("admin.MerchantBranchEdit")?e("div",[e("span",n.title),e("e-dropdown",{props:{columnKey:n.key,name:"label",value:"value",dataList:t.$options.filters.merchantVerify([])},on:{handleDropdownChange:t.handleFormDataChange}})]):e("span",n.title)},render:function(e,a){var n=a.row.verify;if(t.$isHasMenuAuth("admin.MerchantBranchEdit")&&-1!==t.selectTable.indexOf(a.row.id))return e("div",[e("e-select",{props:{current:n,name:"label",value:"value",dataList:t.$options.filters.merchantVerify([])},on:{handleSelectChange:function(e){return t.handleSelectChange(e,a.index,a.column.key)}}})]);var r="#666";return r=99===a.row.verify?"#f90":1===a.row.verify||5===a.row.verify?"#19be6b":2===a.row.verify?"#ed4014":3===a.row.verify||4===a.row.verify?"#c5c8ce":"#666",e("span",{style:{color:r}},t.$options.filters.merchantVerify(n))}},{title:this.$t("dt.form.deletedAt"),key:"deletedAt",width:170,align:"center",sortable:!0,render:function(e,a){return e("span",t.$options.filters.formatTime(a.row.deletedAt))}},{title:this.$t("dt.form.updatedAt"),key:"updatedAt",width:170,align:"center",sortable:!0,render:function(e,a){return e("span",t.$options.filters.formatTime(a.row.updatedAt))}},{title:this.$t("dt.form.createdAt"),key:"createdAt",width:170,align:"center",sortable:!0,render:function(e,a){return e("span",t.$options.filters.formatTime(a.row.createdAt))}},{title:this.$t("dt.form.action"),key:"action",width:180,align:"center",fixed:"right",render:function(e,a){if(t.$isHasMenuAuth("admin.MerchantBranchEdit")&&-1!==t.selectTable.indexOf(a.row.id))return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleAsyncSavaAll(a.row)}}},t.$t("dt.form.save")),e("Button",{props:{type:"warning",size:"small"},on:{click:function(){t.handleTableRowCancelChecked(a.row)}}},t.$t("dt.form.cancel"))]);var n=[];return t.$isHasMenuAuth("admin.MerchantBranchDetail")&&n.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleCheckHabitType({name:"admin.MerchantBranchDetail",params:{id:a.row.id}})}}},t.$t("dt.form.detail"))),t.$isHasMenuAuth("admin.MerchantBranchEdit")&&n.push(e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleCheckHabitType({name:"admin.MerchantBranchEdit",params:{id:a.row.id}})}}},t.$t("dt.form.edit"))),t.$isHasMenuAuth("admin.MerchantBranchDelete")&&n.push(e("Button",{props:{type:s["a"].isEmpty(a.row.deletedAt)?"error":"success",size:"small"},on:{click:function(){s["a"].isEmpty(a.row.deletedAt)?t.handleAsync(a):t.handleRecoveryAsync(a)}}},s["a"].isEmpty(a.row.deletedAt)?t.$t("dt.form.delete"):t.$t("dt.form.recovery"))),e("div",n)}}]}},created:function(){this.$isHasMenuAuth("admin.MerchantList")&&this.handleMerchantList(),this.handleList()},mounted:function(){},watch:{},filters:{},methods:{handleList:function(){var t=this,e=this.handleInitFields(this.columns,["users.id","merchant.id","merchant.name"]),a=this.variables;this.$Http.Post({mutation:this.$Model.CommonBranchs,variables:a,fields:e}).then((function(e){var a=e.data;t.formTemp=Object(i["a"])(Object(i["a"])({},t.formTemp),a),t.sortData(t.formTemp.data)}))},sortData:function(){var t=this;s["a"].each(this.formTemp.data,(function(e,a){e.index=(t.formTemp.current_page-1)*t.formTemp.per_page+a+1,e.loading=!1}))},handleMerchantList:function(){var t=this;this.$Http.Post({mutation:this.$Model.CommonMerchants,variables:{perPage:0},fields:[{data:["id","name"]}]}).then((function(e){var a=e.data;t.formTemp.merchant=a.data}))},handleRowItemSave:function(t,e){s["a"].isEmpty(t)||this.handleOnRecovery({api:this.$Model.CommonBranchEdit,item:t,type:2},e)},handleUpdateStatus:function(t,e){this.handleUpdateStatusFunc({api:this.$Model.CommonBranchEdit,item:t,value:e})},handleRecovery:function(t,e){s["a"].isEmpty(t)||this.handleOnRecovery({api:this.$Model.CommonBranchsRecovery,item:t},e)},handleDelete:function(t){s["a"].isEmpty(t.id)||s["a"].isEmpty(t.index)||this.handleOnDelete({api:this.$Model.CommonBranchsDelete,item:t})}}},c=o,d=(a("3f23"),a("c701")),h=Object(d["a"])(c,n,r,!1,null,"475acbe9",null);e["default"]=h.exports},"3f23":function(t,e,a){"use strict";a("a7f0")},a7f0:function(t,e,a){}}]);