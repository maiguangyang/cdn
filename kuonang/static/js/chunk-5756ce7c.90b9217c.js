(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5756ce7c"],{"1b87":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ProductCategory-add-page"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"controller"},[a("form-model",{attrs:{formModel:t.formModel,tabName:[t.$t("dt.form.ProductCategoryAdd")],btnTitle:t.$t("dt.base.save")},on:{formDataSubmit:t.handleFormDataSubmit}})],1)])])},o=[],i=a("d211"),s=a("b8f9"),n=a("f2c7"),l={name:"ProductCategoryAdd",data:function(){return{formModel:{hide:[],readonly:[]}}},created:function(){},mounted:function(){},components:{FormModel:n["a"]},watch:{},methods:{handleFormDataSubmit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s["a"].isObject(e)&&s["a"].isObject(e.data)&&!s["a"].isEmpty(e.data)){var a=Object(i["a"])({},e.data),r={data:Object(i["a"])({},a)};this.$Http.Post({mutation:this.$Model.ProductCategoryAdd,variables:r}).then((function(){t.$Message.success(t.$t("dt.toast.saveOk")),t.handleRouteGoBack("admin.ProductCategoryList")}))}else this.$Message.error(this.$t("dt.base.invalidData"))}}},d=l,c=a("c701"),m=Object(c["a"])(d,r,o,!1,null,"e95957fe",null);e["default"]=m.exports},2966:function(t,e,a){},"4ec25":function(t,e,a){"use strict";a("6a61");var r=a("2e91"),o=a("d211"),i=a("5880"),s=a("b8f9"),n={data:function(){return{id:null,isReadonly:!1,formData:{branchId:this.$UserInfo.bid,state:!0,weight:1}}},props:{formData_bak:{type:Object,default:function(){return{}}},formModel:{type:Object,default:function(){return{}}},btnTitle:{type:String,default:""},tabName:{type:Array,default:function(){return[null]}}},created:function(){this.id=this.$GetParamsId(this),this.$FormCheck("*",this.formModel.readonly)&&(this.isReadonly=!0,this.ruleInline={})},computed:Object(o["a"])({},Object(i["mapState"])("base",{loading:function(t){return t.loading},isMethodList:function(t){return t.isMethodList}})),methods:{handleEmitData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.formData;this.$store.commit("popupModel/pageModal",{pageModal:!1}),this.$emit("formDataSubmit",{data:t})},handleFilterBranchChange:function(t){s["a"].isEmpty(t)||(this.formData.branchId=t)},handleSumbit:function(){var t=arguments,e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var o,i,n,l,d,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:e.formData,i=t.length>1&&void 0!==t[1]?t[1]:"form",o.state=!0===o.state||1*o.state===1?1:2,n=!0,l=!1,!s["a"].isString(i)){a.next=16;break}if(e.$refs[i]){a.next=11;break}n=!1,l=!0,a.next=14;break;case 11:return a.next=13,e.$refs[i].validate((function(t){return t}));case 13:l=a.sent;case 14:a.next=22;break;case 16:if(!s["a"].isArray(i)){a.next=22;break}return d=!0,s["a"].each(i,function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs[a]?e.$refs[a].validate((function(t){!1===t&&!0===d&&(d=!1)})):(n=!1,d=!0);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.next=21,d;case 21:l=a.sent;case 22:if(!1!==n||!0!==l){a.next=25;break}return e.handleEmitData(o),a.abrupt("return");case 25:if(!1!==l){a.next=28;break}return e.$Message.error(e.$t("dt.form.checkFormComplete")),a.abrupt("return");case 28:c=e.$store.state.popupModel.pageModal,!0===c&&e.$store.commit("popupModel/loadData",{loadData:!0}),e.handleEmitData(o);case 31:case"end":return a.stop()}}),a)})))()}}};e["a"]=n},f0d5:function(t,e,a){"use strict";a("2966")},f2c7:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content-layer"},[a("Tabs",{staticClass:"tabs",attrs:{type:"card"}},[a("TabPane",{attrs:{label:t.tabName[0]}},[a("Form",{ref:"form",staticClass:"form-page",attrs:{"label-position":"right","label-width":100,model:t.formData,rules:t.ruleInline}},[a("Col",{directives:[{name:"show",rawName:"v-show",value:!t.$FormCheck("name",t.formModel.hide),expression:"!$FormCheck('name', formModel.hide)"}],staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.form.ProductCategoryName"),prop:"name"}},[a("Input",{attrs:{readonly:t.$FormCheck("name",t.formModel.readonly),clearable:!t.$FormCheck("name",t.formModel.readonly),placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.form.ProductCategoryName")})},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("Col",{directives:[{name:"show",rawName:"v-show",value:!t.$FormCheck("parent",t.formModel.hide),expression:"!$FormCheck('parent', formModel.hide)"}],staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.form.parent"),prop:"parent"}},[a("Cascader",{attrs:{data:t.formTemp.categoryList,disabled:t.$FormCheck("parent",t.formModel.readonly),readonly:t.$FormCheck("parent",t.formModel.readonly),clearable:!1,transfer:!0,"change-on-select":"",placeholder:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.parent")})},model:{value:t.formData.parent,callback:function(e){t.$set(t.formData,"parent",e)},expression:"formData.parent"}})],1)],1),a("Col",{directives:[{name:"show",rawName:"v-show",value:!t.$FormCheck("tyeId",t.formModel.hide),expression:"!$FormCheck('tyeId', formModel.hide)"}],staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.form.ProductType"),prop:"tyeId"}},[a("Tooltip",{attrs:{"max-width":"200",content:t.$t("dt.toast.ProductCategoryTip"),placement:"top"}},[a("Select",{attrs:{clearable:t.$FormCheck("tyeId",t.formModel.readonly),disabled:t.$FormCheck("tyeId",t.formModel.readonly),readonly:t.$FormCheck("tyeId",t.formModel.readonly),placeholder:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.ProductType")})},model:{value:t.formData.tyeId,callback:function(e){t.$set(t.formData,"tyeId",e)},expression:"formData.tyeId"}},t._l(t.formTemp.productType,(function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),t.isReadonly||!t.$isHasMenuAuth("admin.ProductTypeAdd")||t.id?t._e():a("span",{staticClass:"no-flex",on:{click:function(e){t.handleCheckHabitType({name:"admin.ProductTypeAdd",query:{dt:t.$SetDtLink(t.$route,t.$store.state)}})}}},[t._v(" "+t._s(t.$t("dt.form.add"))+" ")])],1)],1),a("Col",{directives:[{name:"show",rawName:"v-show",value:!t.$FormCheck("keyword",t.formModel.hide),expression:"!$FormCheck('keyword', formModel.hide)"}],staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.form.keyword"),prop:"keyword"}},[a("Tooltip",{attrs:{"max-width":"200",content:t.$t("dt.toast.KeywordTip"),placement:"top"}},[a("Input",{attrs:{readonly:t.$FormCheck("keyword",t.formModel.readonly),clearable:!t.$FormCheck("keyword",t.formModel.readonly),placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.form.keyword")})},model:{value:t.formData.keyword,callback:function(e){t.$set(t.formData,"keyword",e)},expression:"formData.keyword"}})],1)],1)],1),a("Col",{directives:[{name:"show",rawName:"v-show",value:!t.$FormCheck("describe",t.formModel.hide),expression:"!$FormCheck('describe', formModel.hide)"}],staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.base.describe"),prop:"describe"}},[a("Input",{attrs:{readonly:t.$FormCheck("describe",t.formModel.readonly),clearable:!t.$FormCheck("describe",t.formModel.readonly),maxlength:"255","show-word-limit":"",type:"textarea",rows:4,placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.base.describe")})},model:{value:t.formData.describe,callback:function(e){t.$set(t.formData,"describe",e)},expression:"formData.describe"}})],1)],1),a("Col",{directives:[{name:"show",rawName:"v-show",value:!t.$FormCheck("picture",t.formModel.hide),expression:"!$FormCheck('picture', formModel.hide)"}],staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.form.picture"),prop:"picture"}},[a("UploadFile",{attrs:{autoUpload:!0,disabled:t.$FormCheck("picture",t.formModel.readonly)},model:{value:t.formData.picture,callback:function(e){t.$set(t.formData,"picture",e)},expression:"formData.picture"}},[t.formData.picture?a("div",{staticClass:"upload-list-cover"},[a("img",{staticStyle:{"max-width":"100%",display:"block",margin:"auto"},attrs:{src:t._f("formatImage")(t.formData.picture)}}),t.formData.picture?a("div",{staticClass:"icon-layer"},[a("Icon",{attrs:{size:"35",type:"ios-eye-outline",color:"#fff"},on:{click:function(e){return e.stopPropagation(),t.handleView(t.formData.picture)}}}),a("Icon",{attrs:{size:"35",type:"ios-camera-outline",color:"#fff"}}),a("Icon",{attrs:{size:"35",type:"md-trash",color:"#fff"},on:{click:function(e){e.stopPropagation(),t.formData.picture=""}}})],1):t._e()]):a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),a("p",[t._v("Click or drag files here to upload")])],1)])],1)],1),a("Col",{directives:[{name:"show",rawName:"v-show",value:!t.$FormCheck("weight",t.formModel.hide),expression:"!$FormCheck('weight', formModel.hide)"}],staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.form.weight"),prop:"weight"}},[a("Input",{attrs:{readonly:t.$FormCheck("weight",t.formModel.readonly),clearable:!t.$FormCheck("weight",t.formModel.readonly),placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.form.weight")})},model:{value:t.formData.weight,callback:function(e){t.$set(t.formData,"weight",t._n(e))},expression:"formData.weight"}})],1)],1),a("Col",{staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",{attrs:{label:t.$t("dt.form.status")}},[a("i-switch",{attrs:{disabled:t.$FormCheck("state",t.formModel.readonly),size:"large"},model:{value:t.formData.state,callback:function(e){t.$set(t.formData,"state",e)},expression:"formData.state"}},t._l(t.$options.filters.state([]),(function(e,r){return a("span",{key:r,attrs:{slot:1===1*e.value?"open":"close"},slot:1===1*e.value?"open":"close"},[t._v(t._s(e.label))])})),0)],1)],1),a("Col",{staticClass:"input-item",attrs:{xs:24,sm:16,md:16,lg:12,xl:8,xxl:6}},[a("FormItem",[!t.isReadonly&&t.$isHasMenuAuth("admin.ProductCategoryAdd")||!t.isReadonly&&t.$isHasMenuAuth("admin.ProductCategoryEdit")?a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSumbitCheck}},[t._v(" "+t._s(t.btnTitle)+" ")]):t.$isHasMenuAuth("admin.ProductCategoryEdit")?a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleCheckHabitType({name:"admin.ProductCategoryEdit",params:{id:t.id}})}}},[t._v(" "+t._s(t.$t("dt.form.edit"))+" ")]):t._e(),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleRouteGoBack("admin.ProductCategoryList")}}},[t._v(t._s(t.$t("dt.base.back")))])],1)],1)],1)],1)],1),a("Modal",{attrs:{title:t.$t("dt.base.review",{label:t.$t("dt.form.picture")}),scrollable:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.formTemp.previewUrl?a("img",{staticStyle:{"max-width":"100%",display:"block",margin:"auto"},attrs:{src:t._f("formatImage")(t.formTemp.previewUrl)}}):t._e()])],1)},o=[],i=(a("2d38"),a("64fe"),a("5c4c"),a("d8f4"),a("2083"),a("d211")),s=a("b8f9"),n=a("f26a"),l=a("4ec25"),d={name:"CategoryModel",mixins:[l["a"]],data:function(){return{visible:!1,formTemp:{previewUrl:null,categoryList:[{value:"1",label:this.$t("dt.form.oneMenu")}],productType:[]},formData:{parent:[],pid:"",picture:""},ruleInline:{name:[{required:!0,message:this.$t("dt.base.pleaseInput",{label:this.$t("dt.form.ProductCategoryName")}),trigger:"blur"}],parent:[{required:!0,type:"array",message:this.$t("dt.base.pleaseSelect",{label:this.$t("dt.form.parent")}),trigger:"blur"}],weight:[{required:!0,type:"number",message:this.$t("dt.form.weightPlaceholder"),trigger:"blur"},{validator:this.$Validator("number",this.$t("dt.form.weightPlaceholder")),trigger:"blur"}]}}},created:function(){this.handleCategoryList(),this.handleProductTypeList(),s["a"].isEmpty(this.id)||this.handleDetail()},mounted:function(){},components:{UploadFile:n["a"]},watch:{},methods:{handleDetail:function(){var t=this;this.$Http.Post({mutation:this.$Model.ProductCategoryDetail,variables:{id:this.id},fields:["id","name","pid","parent","tyeId","keyword","describe","picture","weight","state"]},(function(){t.$router.push({name:"admin.ProductCategoryList"})})).then((function(e){var a=e.data,r=s["a"].isEmpty(a.parent)?a.pid:a.parent;a.parent=s["a"].isString(r)?r.split(","):r,a.state=1===a.state||!0===a.state,t.formData=Object(i["a"])(Object(i["a"])({},t.formData),a)}))},handleCategoryList:function(){var t=this;this.$isHasMenuAuth("admin.ProductCategoryList")&&(this.formTemp.categoryList=[{value:"1",label:this.$t("dt.form.oneMenu")}],this.$Http.Post({mutation:this.$Model.ProductCategorys,variables:{perPage:0,filter:{id_ne:this.id}},fields:[{data:["id","name","pid"]}]}).then((function(e){var a=e.data;if(!s["a"].isEmpty(a.data)){s["a"].each(a.data,(function(t){t.label=t.name,t.value=t.id}));var r=t.$handleFindMenu(a.data);t.formTemp.categoryList=t.formTemp.categoryList.concat(r)}})))},handleProductTypeList:function(){var t=this;this.$isHasMenuAuth("admin.ProductTypeList")&&this.$Http.Post({mutation:this.$Model.ProductTypes,variables:{perPage:0},fields:[{data:["id","name"]}]}).then((function(e){var a=e.data;t.formTemp.productType=a.data}))},handleView:function(t){s["a"].isEmpty(t)||(this.formTemp.previewUrl=t,this.visible=!0)},handleSumbitCheck:function(){var t=Object(i["a"])({},this.formData);t.pid=s["a"].isArray(t.parent)?t.parent[t.parent.length-1]:t.parent,t.parent=s["a"].isArray(t.parent)?t.parent.join():t.parent,this.handleSumbit(t)}}},c=d,m=(a("f0d5"),a("c701")),u=Object(m["a"])(c,r,o,!1,null,"22466d80",null);e["a"]=u.exports}}]);