(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f70ba11a"],{"5c97":function(t,e,a){},"9fc9":function(t,e,a){"use strict";a("5c97")},ca12:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PutStock-list-page"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"controller"},[a("Row",{staticClass:"filter-group",class:{active:t.rowToggle},attrs:{type:"flex",gutter:20}},[a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.form.OrderNo"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{search:"",placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.form.OrderNo")})},on:{"on-enter":t.handleFilterChange,"on-search":t.handleFilterChange},model:{value:t.filters.orderNo_like,callback:function(e){t.$set(t.filters,"orderNo_like",e)},expression:"filters.orderNo_like"}})],1)],1)],1),t.$isHasMenuAuth("admin.PurchaseOrderList")?a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.form.PurchaseOrder"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("ListSelectModal",{attrs:{title:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.PurchaseOrder")}),type:2,route:"PurchaseOrderAdd",api:t.$Model.PurchaseOrders,column:[{name:t.$t("dt.form.PurchaseOrderName")},{remark:t.$t("dt.base.remark")}],attrs:{label:"name",value:"id"},callback:t.handleFilterChange,placeholder:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.PurchaseOrder")})},model:{value:t.filters.purchaseId,callback:function(e){t.$set(t.filters,"purchaseId",e)},expression:"filters.purchaseId"}})],1)],1)],1):t._e(),t.$isHasMenuAuth("admin.SupplyList")?a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.form.Supply"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("ListSelectModal",{ref:"supply",attrs:{title:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.Supply")}),type:2,route:"SupplyAdd",api:t.$Model.Supplys,column:[{name:t.$t("dt.form.SupplyName")},{code:t.$t("dt.form.SupplyCode")},{telPhone:t.$t("dt.base.telPhone")},{remark:t.$t("dt.base.remark")}],attrs:{label:"name",value:"id"},filter:t.filter.supply,callback:t.handleFilterChange,placeholder:t.$t("dt.base.pleaseSelect",{label:t.$t("dt.form.Supply")})},model:{value:t.filters.supplyId,callback:function(e){t.$set(t.filters,"supplyId",e)},expression:"filters.supplyId"}},[a("div",{staticClass:"filter-item",attrs:{slot:"filter"},slot:"filter"},[a("span",[t._v(t._s(t.$t("dt.form.SupplyCode"))+"：")]),a("Input",{attrs:{search:"","enter-button":"",placeholder:t.$t("dt.base.pleaseInput",{label:t.$t("dt.form.SupplyCode")})},on:{"on-enter":t.handleFilterSupplyCodeChange,"on-search":t.handleFilterSupplyCodeChange},model:{value:t.filter.supply.code_like,callback:function(e){t.$set(t.filter.supply,"code_like",e)},expression:"filter.supply.code_like"}})],1)])],1)],1)],1):t._e(),a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"child-title",attrs:{span:"8"}},[a("span",[t._v(t._s(t.$t("dt.base.sort"))+"：")])]),a("Col",{attrs:{span:"16"}},[a("sorts",{on:{swtichSorts:t.handleFilterChange}})],1)],1)],1),a("button",{staticClass:"row-toggle",attrs:{type:"button"},on:{click:function(e){return t.$store.commit("spinShow/rowToggle")}}},[t.rowToggle?a("Icon",{attrs:{type:"ios-arrow-up",size:"25",color:"#999"}}):a("Icon",{attrs:{type:"ios-arrow-down",size:"25",color:"#999"}})],1)],1),a("div",{staticClass:"btn-group"},[a("div",{staticClass:"left"},[t.$isHasMenuAuth("admin.PutStockAdd")?a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleCheckHabitType({name:"admin.PutStockAdd"})}}},[a("Icon",{attrs:{type:"md-add"}}),t._v(t._s(t.$t("dt.form.PutStockAdd"))+" ")],1):t._e()],1),a("div",{staticClass:"right"},[t.$isHasMenuAuth("admin.PutStockExport")?a("Button",{attrs:{type:"warning"},on:{click:t.handleAsyncExport}},[a("Icon",{attrs:{type:"md-cloud-download"}}),t._v(t._s(t.$t("dt.form.export"))+"Excel ")],1):t._e()],1)]),a("div",{staticClass:"table"},[a("Table",{ref:"selection",attrs:{border:"",loading:t.loading&&t.isMethodList,columns:t.columns,data:t.formTemp.data},on:{"on-select-cancel":t.handleTableOnSelectCancel,"on-selection-change":t.handleTableSelectionChange}})],1),a("div",{staticClass:"page-list"},[a("Page",{attrs:{"show-total":"","show-sizer":"","show-elevator":"",total:t.formTemp.total,current:t.formTemp.current_page,"page-size-opts":t.formTemp.pageSizeOpts,"page-size":t.formTemp.per_page},on:{"on-page-size-change":t.handleOnPageSizeChange,"on-change":t.handleChangePage}})],1)],1)])])},i=[],n=(a("2d38"),a("2c78"),a("69bf"),a("02bf"),a("a39b"),a("5c4c"),a("d211")),s=a("b8f9"),l=a("efa4"),o=a("494e"),d={name:"PutStockList",mixins:[l["a"]],data:function(){return{filter:{supply:{}},formTemp:{warehouseList:[],supplyList:[]}}},components:{ListSelectModal:o["a"]},computed:{columns:function(){var t=this;return[{type:"selection",width:60,align:"center",fixed:"left"},{title:this.$t("dt.form.index"),type:"index",width:80,align:"center"},{title:this.$t("dt.form.OrderNo"),key:"orderNo",width:160,align:"center",render:function(e,a){var r=a.row.orderNo;return e(t.$isHasMenuAuth("admin.PutStockDetail")?"router-link":"span",{props:{to:{name:"admin.PutStockDetail",params:{id:a.row.id}}}},r)}},{title:this.$t("dt.form.PutStockProject"),minWidth:150,align:"center",render:function(e,a){var r=a.row.detail||[];return e("span","".concat(r.length," ").concat(t.$t("dt.base.term")))}},{title:this.$t("dt.form.PutStockNumber"),minWidth:150,align:"center",render:function(e,a){var r=a.row.detail||[],i=0;return s["a"].isEmpty(r)||(i=r.map((function(t){return t.number})).reduce((function(t,e){return t+e}),0)),e("span","".concat(i," ").concat(t.$t("dt.base.piece")))}},{title:this.$t("dt.form.RelatedOrders"),align:"center",children:[{title:this.$t("dt.form.OrderName"),minWidth:180,align:"center",render:function(e,a){var r=a.row.tye;if(4===r)return e("span",t.$t("dt.form.DirectPutStock"));if(1===r){var i=a.row.purchase||{};return e(t.$isHasMenuAuth("admin.PurchaseOrderDetail")&&i.id?"router-link":"span",{props:{to:{name:"admin.PurchaseOrderDetail",params:{id:i.id}}}},i.name)}if(3===r){var n=a.row.revokeProduct||{};return e(t.$isHasMenuAuth("admin.RevokeProductDetail")&&n.id?"router-link":"span",{props:{to:{name:"admin.RevokeProductDetail",params:{id:n.id}}}},n.orderNo)}var s=a.row.allocation||{};return e(t.$isHasMenuAuth("admin.AllocationDetail")&&s.id?"router-link":"span",{props:{to:{name:"admin.AllocationDetail",params:{id:s.id}}}},s.name)}},{title:this.$t("dt.form.OrderType"),key:"tye",minWidth:150,align:"center",render:function(e,a){return e("span",t.$options.filters.PutOrderType(a.row.tye))}},{title:this.$t("dt.form.TotalNumber"),minWidth:150,align:"center",render:function(e,a){var r=a.row.tye;if(1===r){var i=a.row.purchase||{};return e("span","".concat(i.number," ").concat(t.$t("dt.base.piece")))}var n=a.row.detail||[],l=0;return s["a"].isEmpty(n)||(l=n.map((function(t){return t.number})).reduce((function(t,e){return t+e}),0)),e("span","".concat(l," ").concat(t.$t("dt.base.piece")))}},{title:this.$t("dt.form.PutNumber"),minWidth:150,align:"center",render:function(e,a){var r=a.row.tye;if(1===r){var i=a.row.purchase||{};return e("span","".concat(i.putNumber," ").concat(t.$t("dt.base.piece")))}var n=a.row.detail||[],l=0;return s["a"].isEmpty(n)||(l=n.map((function(t){return t.number})).reduce((function(t,e){return t+e}),0)),e("span","".concat(l," ").concat(t.$t("dt.base.piece")))}}]},{title:this.$t("dt.form.Supply"),minWidth:200,align:"center",render:function(t,e){var a=e.row.supply||{};return t("span",a.name)}},{title:this.$t("dt.base.remark"),key:"remark",minWidth:200,maxWidth:300,tooltip:!0,align:"center"},{title:this.$t("dt.form.createdAt"),key:"createdAt",width:170,align:"center",sortable:!0,render:function(e,a){return e("span",t.$options.filters.formatTime(a.row.createdAt))}},{title:this.$t("dt.form.action"),key:"action",width:120,align:"center",fixed:"right",render:function(e,a){if(t.$isHasMenuAuth("admin.PutStockEdit")&&-1!==t.selectTable.indexOf(a.row.id))return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleAsyncSavaAll(a.row)}}},t.$t("dt.form.save")),e("Button",{props:{type:"warning",size:"small"},on:{click:function(){t.handleTableRowCancelChecked(a.row)}}},t.$t("dt.form.cancel"))]);var r=[];return t.$isHasMenuAuth("admin.PutStockDetail")&&r.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleCheckHabitType({name:"admin.PutStockDetail",params:{id:a.row.id}})}}},t.$t("dt.form.detail"))),e("div",r)}}]}},created:function(){this.handleList()},mounted:function(){},watch:{},filters:{},methods:{handleList:function(){var t=this,e=this.handleInitFields(this.columns,["tye","supply.id","supply.name","user.id","user.username","user.phone","purchase.id","purchase.name","purchase.number","purchase.putNumber","revokeProduct.id","revokeProduct.orderNo","detail.id","detail.number","allocation.id","allocation.name"]),a=this.variables;this.$Http.Post({mutation:this.$Model.PurchasePutStocks,variables:a,fields:e}).then((function(e){var a=e.data;t.formTemp=Object(n["a"])(Object(n["a"])({},t.formTemp),a),t.sortData(t.formTemp.data)}))},sortData:function(){var t=this;s["a"].each(this.formTemp.data,(function(e,a){e.index=(t.formTemp.current_page-1)*t.formTemp.per_page+a+1,e.loading=!1}))},handleFilterSupplyCodeChange:function(){this.filter.supply.code_like||delete this.filter.supply.code_like,this.$refs.supply.handleSlotWatch()},handleRowItemSave:function(t,e){s["a"].isEmpty(t)||this.handleOnRecovery({api:this.$Model.PurchasePutStockEdit,item:t,type:2},e)},handleUpdateStatus:function(t,e){this.handleUpdateStatusFunc({api:this.$Model.PurchasePutStockEdit,item:t,value:e})},handleRecovery:function(t,e){s["a"].isEmpty(t)||this.handleOnRecovery({api:this.$Model.PurchasePutStocksRecovery,item:t},e)},handleDelete:function(t){s["a"].isEmpty(t.id)||s["a"].isEmpty(t.index)||this.handleOnDelete({api:this.$Model.PurchasePutStocksDelete,item:t})}}},c=d,u=(a("9fc9"),a("c701")),p=Object(u["a"])(c,r,i,!1,null,"e83a8798",null);e["default"]=p.exports}}]);